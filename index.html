<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Happy New Year Surprise</title>

<style>
*{
  box-sizing:border-box;
  font-family:Segoe UI,sans-serif;
  -webkit-tap-highlight-color:transparent;
}

/* üîí PREVENT TEXT / EMOJI SELECTION */
body, .hold, .heart, .card, .gift, .ticket {
  user-select:none;
  -webkit-user-select:none;
  -webkit-touch-callout:none;
}

body{
  margin:0;height:100vh;overflow:hidden;
  display:flex;align-items:center;justify-content:center;
  background:#050509;color:#eee;
  touch-action:none;
}

/* ---------- PAGES ---------- */
.page{
  position:absolute;inset:0;display:none;
  flex-direction:column;align-items:center;justify-content:center;
  text-align:center;
  animation:fadeIn .8s ease forwards;
}
.page.active{display:flex}
@keyframes fadeIn{
  from{opacity:0;transform:scale(.95)}
  to{opacity:1;transform:scale(1)}
}

/* ---------- BACKGROUNDS ---------- */
.bg{position:absolute;inset:0;z-index:-1;opacity:0;transition:opacity 1s}
.bg.active{opacity:1}
.bg1{background:radial-gradient(circle at 20% 30%,rgba(255,210,120,.18),transparent 40%),#050509}
.bg2{background:repeating-radial-gradient(circle,rgba(255,255,255,.06) 0 1px,transparent 1px 120px),#050509}
.bg3{background:repeating-radial-gradient(circle,rgba(255,255,255,.08) 0 1px,transparent 1px 140px),#050509}

/* ---------- PAGE 1 ---------- */
h1{color:#fff}
.hint{color:#aaa;font-size:14px;margin-bottom:26px}
.hold{
  width:160px;height:160px;border-radius:50%;
  position:relative;display:flex;align-items:center;justify-content:center;
  animation:float 3s ease-in-out infinite;
}
@keyframes float{50%{transform:translateY(-8px)}}
.heart{font-size:52px;animation:pulse 1.4s infinite}
@keyframes pulse{50%{transform:scale(1.25)}}
svg{position:absolute;width:160px;height:160px;transform:rotate(-90deg)}
circle{
  fill:none;stroke:#9fa8ff;stroke-width:6;
  stroke-dasharray:460;stroke-dashoffset:460;
  transition:1.2s;
}

/* ---------- PAGE 2 ---------- */
.stack{position:relative;width:300px;height:220px}
.card{
  position:absolute;inset:0;border-radius:18px;
  border:2px solid rgba(255,255,255,.25);
  display:flex;align-items:center;justify-content:center;
  font-size:21px;font-weight:600;color:#fff;
  cursor:pointer;transition:.6s;
}
.card:nth-child(1){background:#5f2c82;z-index:4}
.card:nth-child(2){background:#2c7744;transform:translate(15px,15px);z-index:3}
.card:nth-child(3){background:#734b6d;transform:translate(30px,30px);z-index:2}
.card:nth-child(4){background:#414345;transform:translate(45px,45px);z-index:1}
.card.removed{
  transform:translateY(-180px) rotate(-12deg);
  opacity:0;pointer-events:none;
}
.gift{
  font-size:90px;margin-top:40px;display:none;
  animation:giftPulse 1.5s infinite;
  cursor:pointer;
}
@keyframes giftPulse{50%{transform:scale(1.15)}}

/* ---------- PAGE 3 ---------- */
.ticket{width:260px;height:420px;perspective:1200px}
.inner{
  width:100%;height:100%;position:relative;
  transform-style:preserve-3d;
  transition:1.2s cubic-bezier(.4,.2,.2,1);
}
.ticket.open .inner{transform:rotateY(180deg)}
.face{
  position:absolute;inset:0;border-radius:20px;
  background:#fff6dc;border:4px solid #5aa9ff;
  backface-visibility:hidden;padding:22px;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
}
.front h2{
  background:linear-gradient(135deg,#ff6a00,#ffd700,#00c6ff);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
.back{transform:rotateY(180deg);color:#333}

/* ---------- FIREWORKS ---------- */
canvas{position:absolute;inset:0;pointer-events:none}
</style>
</head>

<body>

<canvas id="fireworks"></canvas>

<div class="bg bg1 active"></div>
<div class="bg bg2"></div>
<div class="bg bg3"></div>

<!-- PAGE 1 -->
<div class="page active" id="p1">
  <h1>A little surprise for you üíñ</h1>
  <p class="hint">Hold the heart‚Ä¶</p>
  <div class="hold" id="hold">
    <div class="heart">‚ù§Ô∏è</div>
    <svg><circle cx="80" cy="80" r="74"></circle></svg>
  </div>
</div>

<!-- PAGE 2 -->
<div class="page" id="p2">
  <p class="hint">Let these go‚Ä¶</p>
  <div class="stack">
    <div class="card">üåß Bad days</div>
    <div class="card">üíº Work</div>
    <div class="card">üåÄ Stress</div>
    <div class="card">üíî Long distance</div>
  </div>
  <div class="gift" id="gift">üéÅ</div>
</div>

<!-- PAGE 3 -->
<div class="page" id="p3">
  <div class="ticket" id="ticket">
    <div class="inner">
      <div class="face front">
        <h2>Happy New Year üéÜ</h2>
        <div style="font-size:64px">üß∏</div>
        <small>(tap to open)</small>
      </div>
      <div class="face back">
        <h3>For You üíô</h3>
        <p>Wishing you peace, warmth and happiness ‚ú®</p>
      </div>
    </div>
  </div>
</div>

<script>
/* üö´ Disable long-press menu globally */
document.addEventListener("contextmenu",e=>e.preventDefault());

/* ---------- PAGE SWITCH ---------- */
function show(n){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.bg').forEach(b=>b.classList.remove('active'));
  document.getElementById('p'+n).classList.add('active');
  document.querySelector('.bg'+n).classList.add('active');
}

/* ---------- HOLD (FIXED FOR MOBILE) ---------- */
const c=document.querySelector('circle');
const h=document.getElementById('hold');
let timer;

h.addEventListener("pointerdown",e=>{
  e.preventDefault();           // ‚≠ê KEY FIX
  c.style.strokeDashoffset=0;
  timer=setTimeout(()=>show(2),1200);
});

["pointerup","pointerleave","pointercancel"].forEach(ev=>{
  h.addEventListener(ev,()=>{
    clearTimeout(timer);
    c.style.strokeDashoffset=460;
  });
});

/* ---------- CARDS ---------- */
const cards=document.querySelectorAll('.card');
const gift=document.getElementById('gift');
cards.forEach(cd=>{
  cd.addEventListener("pointerdown",()=>{
    cd.classList.add('removed');
    if([...cards].every(c=>c.classList.contains('removed')))
      setTimeout(()=>gift.style.display='block',600);
  });
});

/* ---------- FIREWORKS (CONTINUOUS UNTIL CARD TAP) ---------- */
const canvas=document.getElementById("fireworks");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;canvas.height=innerHeight;
window.onresize=()=>{canvas.width=innerWidth;canvas.height=innerHeight};

let particles=[];
let fireworksRunning=false;

function burst(x,y){
  const hue=Math.random()*360;
  for(let i=0;i<70;i++){
    const a=Math.random()*Math.PI*2;
    const s=Math.random()*3+2;
    particles.push({x,y,vx:Math.cos(a)*s,vy:Math.sin(a)*s,life:60,hue});
  }
}

function animate(){
  ctx.fillStyle="rgba(0,0,0,0.35)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  particles=particles.filter(p=>p.life-- >0);
  particles.forEach(p=>{
    p.x+=p.vx;p.y+=p.vy;p.vy+=0.03;
    ctx.fillStyle=`hsla(${p.hue},80%,60%,0.9)`;
    ctx.beginPath();
    ctx.arc(p.x,p.y,2.2,0,Math.PI*2);
    ctx.fill();
  });
  if(fireworksRunning && Math.random()<0.05)
    burst(Math.random()*canvas.width,Math.random()*canvas.height*0.5);
  requestAnimationFrame(animate);
}
animate();

/* ---------- GIFT TAP ---------- */
gift.addEventListener("pointerdown",()=>{
  fireworksRunning=true;
  show(3);
});

/* ---------- TICKET TAP ---------- */
document.getElementById("ticket").addEventListener("pointerdown",function(){
  fireworksRunning=!fireworksRunning;
  this.classList.toggle("open");
});
</script>

</body>
</html>








